@{
    ViewData["Title"] = "Register";
}
@model RegisterModel

<section class="vh-100">
    <div class="container-fluid h-custom">
        <div class="row d-flex justify-content-center align-items-center h-100">

            <div class="col-md-9 col-lg-6 col-xl-5">
                <div id="carCarousel" class="carousel slide" data-bs-ride="carousel">
                    <!-- Hình ảnh xe hơi -->
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="~/img/caro-1.webp" class="d-block w-100" alt="Lap1" />
                        </div>
                        <div class="carousel-item">
                            <img src="~/img/caro-2.webp" class="d-block w-100" alt="Lap2" />
                        </div>
                        <div class="carousel-item">
                            <img src="~/img/caro-3.webp" class="d-block w-100" alt="Lap3" />
                        </div>
                    </div>
                    <!-- Nút chuyển trang -->
                    <a class="carousel-control-prev" href="#carCarousel" role="button" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon " aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carCarousel" role="button" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </a>
                </div>
            </div>
            <style>
                /* Add this style to your existing CSS or in a style tag in the head of your HTML file */
                .carousel-control-prev-icon,
                .carousel-control-next-icon {
                    background-color: #000;
                    /* Set the background color to black */
                    color: #fff;
                    /* Set the arrow color to white */
                }
            </style>

            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
                <p id="errorMessage" class="text-center text-danger"></p>
                <form asp-action="SignUp" asp-controller="Auth" method="post" enctype="multipart/form-data">
                    <div class="d-flex flex-row align-items-center justify-content-center justify-content-lg-start">
                        <p class="lead fw-normal mb-0 me-3">Sign in with</p>
                        <ul class="list-unstyled small text-muted">
                            <li>
                                <div class="mt-4 text-white">
                                    <i
                                        class="fa-brands fa-square-facebook border border-black bg-black p-2 mt-1 fs-3"></i>
                                    <i class="fa-brands fa-google-plus-g border border-black bg-black p-2 mt-1 fs-3"
                                        style="color: #ffffff;"></i>
                                    <i class="fa-brands fa-linkedin border border-black bg-black p-2 mt-1 fs-3"></i>
                                    <i class="fa-brands fa-twitter border border-black bg-black p-2 mt-1 fs-3"></i>
                                    <i class="fa-brands fa-vk border border-black bg-black p-2 mt-1 fs-3"></i>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="divider d-flex align-items-center my-4">
                        <p class="text-center fw-bold mx-3 mb-0">Or</p>
                    </div>
                    
                    <div>
                        <label asp-for="email">Email:</label>
                        <input asp-for="email" class="form-control form-control-lg" required placeholder="Enter your email" />
                        <span asp-validation-for="email" class="text-danger"></span>
                    </div>
                    <div>
                        <label asp-for="password">Password:</label>
                        <input asp-for="password" class="form-control form-control-lg" required />
                        <span asp-validation-for="password" class="text-danger"></span>
                    </div>

                    @* <!-- Username input -->
                    <div class="form-outline mb-4">
                        <label for="txtUserName">Username:</label>
                        <input id="txtUserName" type="text" placeholder="Enter your username" autoCompl ete="off"
                            class="form-control form-control-lg" />
                    </div>

                    <!-- Email input -->
                    <div class="form-outline mb-4">
                        <input id="txtUserName" label="Email" type="email" placeholder="Enter your email"
                            autoComplete="off" class="form-control form-control-lg" onChange="setEmail(this.value)" />
                    </div>
                    <!-- Password input -->
                    <div class="form-outline mb-3">
                        <input id="txtPassWord" label="Pass Word" type="password" placeholder="Enter password"
                            autoComplete="off" class="form-control form-control-lg"
                            onChange="setPassword(this.value)" />
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <!-- Checkbox -->
                        <div class="form-check mb-0">
                            <input class="form-check-input me-2" type="checkbox" value="" id="form2Example3" />
                            <label class="form-check-label" for="form2Example3">Remember me</label>
                        </div>
                        <a href="#!" class="text-body">Forgot password?</a>
                    </div> *@
                    <div class="text-center text-lg-start mt-4 pt-2">
                        
                        <button type="submit" class="btn btn-primary btn-lg"
                            style="padding-left: 2.5rem; padding-right: 2.5rem;">Tạo tài khoản</button>

                        <p class="small fw-bold mt-2 pt-1 mb-0">Don't have an account?
                            <a href="/auth/login" class="text-danger">Login</a>
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

@section scripts {
    <script>
        document.getElementById("registerForm").addEventListener("submit", function (event) {
            event.preventDefault();

            const username = document.getElementById('txtUserName').value;
            const email = document.getElementById('txtEmail').value;
            const password = document.getElementById('txtPassWord').value;

            const data = new FormData();
            data.append('UserName', username);
            data.append('Email', email);
            data.append('Password', password);

            fetch('/api/Account/Register', {
                method: 'POST',
                body: data,
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                // Thay đổi nội dung của thẻ <p> dựa trên phản hồi từ API
                const messageElement = document.getElementById('errorMessage');
                if (messageElement) {
                    messageElement.innerHTML = data.message; // Giả sử API trả về một thuộc tính 'message'
                }
            })
            .catch(error => {
                console.error('There has been a problem with your fetch operation:', error);
            });
        });
    </script>
}



<style>

    .divider:after,
    .divider:before {
        content: "";
        flex: 1;
        height: 1px;
        background: #eee;
    }

    .h-custom {
        height: calc(100% - 73px);
    }
</style>
